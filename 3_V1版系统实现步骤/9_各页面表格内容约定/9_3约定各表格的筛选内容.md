# 各表格筛选内容约定

本文档定义各个表格中哪些列支持筛选，以及筛选控件的类型和操作符。

## 一、合同表（contract）

### 默认筛选（重要字段，显示在筛选栏，不超过3行，约12个字段）

#### 1. 保值方案
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从保值方案表中获取所有启用的保值方案列表
- **显示字段**：保值方案名称
- **是否支持多选**：是（可多选多个保值方案）

#### 2. 业务经理
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从人员表中获取所有启用的人员列表
- **显示字段**：人员姓名
- **是否支持多选**：是（可多选多个业务经理）

#### 3. 合同编号
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入合同编号的部分内容即可筛选

#### 4. 供应商/客户
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从客商表中获取所有启用的客商列表（根据合同类型筛选供应商或客户）
- **显示字段**：客商简称
- **是否支持多选**：是（可多选多个客商）
- **是否支持搜索**：是（支持按简称或全称搜索）

#### 5. 现货品种
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从现货品种表中获取所有启用的现货品种列表
- **显示字段**：现货品种名称
- **是否支持多选**：是（可多选多个现货品种）

#### 6. 品牌
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从品牌表中获取所有启用的品牌列表（可先选择现货品种进行过滤）
- **显示字段**：品牌名称
- **是否支持多选**：是（可多选多个品牌）
- **是否支持搜索**：是（支持按品牌名称搜索）

#### 7. 计价方式
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 一口价
  - 暂定价
  - 均价
- **是否支持多选**：是（可多选多个计价方式）

#### 8. 状态
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 启用（enable）
  - 禁用（disable）
  - 已删除（delete）
- **是否支持多选**：是（可多选多个状态）

#### 9. 是否已定价
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 是（已点数量 > 0）
  - 否（已点数量 = 0）
- **说明**：根据已点数量判断是否已定价

#### 10. 是否已交收
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 是（交割日期 <= 当前日期）
  - 否（交割日期 > 当前日期 或 交割日期为空）
- **说明**：根据交割日期判断是否已交收

#### 11. 是否在定价期
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 是（当前日期 <= 点价截止日）
  - 否（当前日期 > 点价截止日 或 点价截止日为空）
- **说明**：根据点价截止日判断是否在定价期

#### 12. 已销售数量（仅采购合同）
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选已销售数量在指定范围内的记录
- **计算公式**：已销售数量 = SUM(采销关联记录中的关联数量)

#### 13. 已采购数量（仅销售合同）
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选已采购数量在指定范围内的记录
- **计算公式**：已采购数量 = SUM(采销关联记录中的关联数量)

#### 14. 创建日期时间
- **控件类型**：日期时间范围选择器（RangePicker with Time）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持选择起始日期时间和结束日期时间，筛选创建日期时间在指定范围内的记录

### 展开筛选（高级筛选，通过"高级筛选"按钮打开抽屉）

#### 15. 合同数量
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选合同数量在指定范围内的记录

#### 16. 单价
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选单价在指定范围内的记录

#### 17. 结算单价
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选结算单价在指定范围内的记录

#### 18. 运输方式
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 自提
  - 送到
- **是否支持多选**：是（可多选多个运输方式）

#### 19. 发生日期时间
- **控件类型**：日期时间范围选择器（RangePicker with Time）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持选择起始日期时间和结束日期时间，筛选发生日期时间在指定范围内的记录

#### 20. 均价起止日
- **控件类型**：日期范围选择器（RangePicker）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持选择起始日期和结束日期，筛选均价起止日在指定范围内的记录

#### 21. 点价截止日
- **控件类型**：日期范围选择器（RangePicker）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持选择起始日期和结束日期，筛选点价截止日在指定范围内的记录

#### 22. 交割日期
- **控件类型**：日期范围选择器（RangePicker）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持选择起始日期和结束日期，筛选交割日期在指定范围内的记录

#### 23. 创建人
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从人员表中获取所有启用的人员列表
- **显示字段**：人员姓名
- **是否支持多选**：是（可多选多个创建人）

#### 24. 自定义字段
- **控件类型**：根据自定义字段类型动态生成
  - 文本类型：文本输入框（Input），操作符：包含
  - 长文本类型：文本输入框（Input），操作符：包含
  - 数字类型：数字范围选择器，操作符：范围
  - 日期类型：日期范围选择器，操作符：范围
  - 日期时间类型：日期时间范围选择器，操作符：范围
  - 下拉选择类型：下拉选择（Select），操作符：等于，选项来源于字段配置
  - 多选下拉类型：下拉选择（Select，多选），操作符：等于，选项来源于字段配置
  - 布尔类型：下拉选择（Select），操作符：等于，选项：是/否

---

## 二、客商表（customer）

### 默认筛选（重要字段，显示在筛选栏，不超过3行，约6个字段）

#### 1. 客商分类
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从客商类型表中获取所有客商类型列表
- **显示字段**：客商类型名称
- **是否支持多选**：是（可多选多个客商分类）

#### 2. 简称
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入简称的部分内容即可筛选

#### 3. 全称
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入全称的部分内容即可筛选

#### 4. 联系人
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入联系人的部分内容即可筛选

#### 5. 手机号
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入手机号的部分内容即可筛选

#### 6. 状态
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 启用（enable）
  - 禁用（disable）
  - 已删除（delete）
- **是否支持多选**：是（可多选多个状态）

### 展开筛选（高级筛选，通过"高级筛选"按钮打开抽屉）

#### 7. 自定义字段
- **控件类型**：根据自定义字段类型动态生成（同合同表）

---

## 三、现货品种表（spot_variety）

### 默认筛选（重要字段，显示在筛选栏，不超过3行，约2个字段）

#### 1. 名称
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入名称的部分内容即可筛选

#### 2. 状态
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 启用（enable）
  - 禁用（disable）
  - 已删除（delete）
- **是否支持多选**：是（可多选多个状态）

---

## 四、品牌表（spot_brand）

### 默认筛选（重要字段，显示在筛选栏，不超过3行，约5个字段）

#### 1. 现货品种
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从现货品种表中获取所有启用的现货品种列表
- **显示字段**：现货品种名称
- **是否支持多选**：是（可多选多个现货品种）

#### 2. 名称
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入品牌名称的部分内容即可筛选

#### 3. 是否主港
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 全部（不筛选）
  - 是（true）
  - 否（false）
- **说明**：不再使用继承状态，null值视为未设置

#### 4. 是否平台价
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 全部（不筛选）
  - 是（true）
  - 否（false）
- **说明**：不再使用继承状态，null值视为未设置

#### 5. 状态
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 启用（enable）
  - 禁用（disable）
  - 已删除（delete）
- **是否支持多选**：是（可多选多个状态）

### 展开筛选（高级筛选，通过"高级筛选"按钮打开抽屉）

#### 6. 价格
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选价格在指定范围内的记录

#### 7. 升贴水
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选升贴水在指定范围内的记录

#### 8. 期货品种
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入期货品种代码的部分内容即可筛选（在品牌关联的期货品种列表中查找）

#### 9. 自定义字段
- **控件类型**：根据自定义字段类型动态生成（同合同表）

---

## 五、人员表（person/user）

### 默认筛选（重要字段，显示在筛选栏，不超过3行，约4个字段）

#### 1. 姓名
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入姓名的部分内容即可筛选

#### 2. 手机号
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入手机号的部分内容即可筛选

#### 3. 角色
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从角色表中获取所有启用的角色列表
- **显示字段**：角色名称
- **是否支持多选**：是（可多选多个角色）
- **说明**：筛选属于指定角色的人员

#### 4. 状态
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 启用（enable）
  - 禁用（disable）
  - 已删除（delete）
- **是否支持多选**：是（可多选多个状态）

### 展开筛选（高级筛选，通过"高级筛选"按钮打开抽屉）

#### 5. 自定义字段
- **控件类型**：根据自定义字段类型动态生成（同合同表）

---

## 六、角色表（role）

### 默认筛选（重要字段，显示在筛选栏，不超过3行，约2个字段）

#### 1. 名称
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入角色名称的部分内容即可筛选

#### 2. 状态
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 启用（enable）
  - 禁用（disable）
  - 已删除（delete）
- **是否支持多选**：是（可多选多个状态）

---

## 七、期货账户表（futures_account）

### 默认筛选（重要字段，显示在筛选栏，不超过3行，约5个字段）

#### 1. 期货账户
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入期货账户名称或编号的部分内容即可筛选

#### 2. 期货公司
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入期货公司名称的部分内容即可筛选

#### 3. 交易员
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从人员表中获取所有启用的人员列表（可筛选具有交易员角色的人员）
- **显示字段**：人员姓名
- **是否支持多选**：是（可多选多个交易员）
- **说明**：筛选关联了指定交易员的账户

#### 4. 别名
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入别名的部分内容即可筛选

#### 5. 账户状态
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 启用（enable）
  - 禁用（disable）
- **是否支持多选**：是（可多选多个账户状态）

### 展开筛选（高级筛选，通过"高级筛选"按钮打开抽屉）

#### 6. 自定义字段
- **控件类型**：根据自定义字段类型动态生成（同合同表）

---

## 八、保值方案表（hedge_plan）

### 默认筛选（重要字段，显示在筛选栏，不超过3行，约4个字段）

#### 1. 名称
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入保值方案名称的部分内容即可筛选

#### 2. 类型
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 整体匹配
  - 单单匹配
  - 无合同（人员）
  - 无合同（客商）
- **是否支持多选**：是（可多选多个类型）

#### 3. 交易员
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从人员表中获取所有启用的人员列表（可筛选具有交易员角色的人员）
- **显示字段**：人员姓名
- **是否支持多选**：是（可多选多个交易员）
- **说明**：筛选交易员列表中包含指定交易员的保值方案

#### 4. 状态
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 启用（enable）
  - 禁用（disable）
  - 已删除（delete）
- **是否支持多选**：是（可多选多个状态）

### 展开筛选（高级筛选，通过"高级筛选"按钮打开抽屉）

#### 5. 制单员
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从人员表中获取所有启用的人员列表
- **显示字段**：人员姓名
- **是否支持多选**：是（可多选多个制单员）
- **说明**：筛选制单员列表中包含指定制单员的保值方案

---

## 九、期货委托单表（entrust_order）

### 默认筛选（重要字段，显示在筛选栏，不超过3行，约8个字段）

#### 1. 保值方案
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从保值方案表中获取所有启用的保值方案列表
- **显示字段**：保值方案名称
- **是否支持多选**：是（可多选多个保值方案）

#### 2. 指令编号
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入指令编号的部分内容即可筛选

#### 3. 短编号
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入众期短编号的部分内容即可筛选

#### 4. 合约
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入合约代码的部分内容即可筛选

#### 5. 方向
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 买入
  - 卖出
- **是否支持多选**：是（可多选多个方向）

#### 6. 成交日期
- **控件类型**：日期范围选择器（RangePicker）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持选择起始日期和结束日期，筛选成交日期在指定范围内的记录

#### 7. 是否已匹配
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 是（已匹配手数 > 0）
  - 否（已匹配手数 = 0）
- **说明**：根据已匹配手数判断是否已匹配

#### 8. 成交价格
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选成交价格在指定范围内的记录

### 展开筛选（高级筛选，通过"高级筛选"按钮打开抽屉）

#### 9. 成交手数
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选成交手数在指定范围内的记录

#### 10. 已匹配手数
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选已匹配手数在指定范围内的记录

#### 11. 未匹配手数
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选未匹配手数在指定范围内的记录

#### 12. 自定义字段
- **控件类型**：根据自定义字段类型动态生成（同合同表）

---

## 十、期现备注表（spot_futures_remark）

### 默认筛选（重要字段，显示在筛选栏，不超过3行，约6个字段）

#### 1. 委托单
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从期货委托单表中获取所有委托单列表
- **显示字段**：短编号或指令编号
- **是否支持多选**：是（可多选多个委托单）
- **是否支持搜索**：是（支持按短编号或指令编号搜索）

#### 2. 标签
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从关联的保值方案的标签列表中获取
- **显示字段**：标签名称
- **是否支持多选**：是（可多选多个标签）

#### 3. 客商
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从客商表中获取所有启用的客商列表
- **显示字段**：客商简称
- **是否支持多选**：是（可多选多个客商）
- **是否支持搜索**：是（支持按简称或全称搜索）
- **互斥约束**：与“合同”筛选互斥，如果已设置合同条件，则不允许再选择客商

#### 4. 合同
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从合同表中获取所有合同列表（仅当保值方案类型为"单单匹配"时可用）
- **显示字段**：合同编号
- **是否支持多选**：是（可多选多个合同）
- **是否支持搜索**：是（支持按合同编号搜索）
- **互斥约束**：与“客商”筛选互斥，如果已设置客商条件，则不允许再选择合同

#### 5. 是否已匹配
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 是（true）
  - 否（false）
- **说明**：根据是否已匹配字段判断

#### 6. 手数
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选手数在指定范围内的记录

### 展开筛选（高级筛选，通过"高级筛选"按钮打开抽屉）

#### 7. 现货数量
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选现货数量在指定范围内的记录

#### 8. 点价价格
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选点价价格在指定范围内的记录

#### 9. 自定义字段
- **控件类型**：根据自定义字段类型动态生成（同合同表）

---

## 十一、弹窗内表格筛选

### 一、合同详情弹窗 - 期现关联记录表格筛选

在合同详情弹窗中，如果显示期现关联记录子表格，支持以下筛选：

#### 默认筛选（重要字段，显示在筛选栏，不超过2行，约6个字段）

#### 1. 委托单短编号
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入短编号的部分内容即可筛选

#### 2. 合约
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入合约代码的部分内容即可筛选

#### 3. 方向
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 买入
  - 卖出
- **是否支持多选**：是（可多选多个方向）

#### 4. 成交日期
- **控件类型**：日期范围选择器（RangePicker）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持选择起始日期和结束日期，筛选成交日期在指定范围内的记录

#### 5. 成交价格
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选成交价格在指定范围内的记录

#### 6. 成交手数
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选成交手数在指定范围内的记录

### 二、角色详情弹窗 - 人员列表表格筛选

在角色详情弹窗中，如果显示关联的人员列表子表格，支持以下筛选：

#### 默认筛选（重要字段，显示在筛选栏，不超过2行，约3个字段）

#### 1. 姓名
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入姓名的部分内容即可筛选

#### 2. 手机号
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入手机号的部分内容即可筛选

#### 3. 状态
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 启用（enable）
  - 禁用（disable）
  - 已删除（delete）
- **是否支持多选**：是（可多选多个状态）

### 三、期货委托单详情弹窗 - 期现备注列表表格筛选

在期货委托单详情弹窗中，如果显示关联的期现备注列表子表格，支持以下筛选：

#### 默认筛选（重要字段，显示在筛选栏，不超过2行，约5个字段）

#### 1. 标签
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从关联的保值方案的标签列表中获取
- **显示字段**：标签名称
- **是否支持多选**：是（可多选多个标签）

#### 2. 客商
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项来源**：从客商表中获取所有启用的客商列表
- **显示字段**：客商简称
- **是否支持多选**：是（可多选多个客商）
- **是否支持搜索**：是（支持按简称或全称搜索）

#### 3. 合同编号
- **控件类型**：文本输入框（Input）
- **操作符**：包含（模糊匹配）
- **说明**：支持部分匹配，输入合同编号的部分内容即可筛选

#### 4. 是否已匹配
- **控件类型**：下拉选择（Select）
- **操作符**：等于
- **选项列表**：
  - 是（true）
  - 否（false）
- **说明**：根据是否已匹配字段判断

#### 5. 手数
- **控件类型**：数字范围选择器（RangePicker for Number）
- **操作符**：范围（大于等于、小于等于）
- **说明**：支持输入最小值和最大值，筛选手数在指定范围内的记录

### 四、弹窗内表格筛选通用规则

#### 筛选器布局
- 弹窗内表格的筛选器显示在子表格上方，以横向排列的方式展示
- 弹窗内表格的默认筛选字段应该精简，通常不超过6个字段，排列不超过2行
- 弹窗内表格通常不提供展开筛选（高级筛选），只提供默认筛选
- 筛选器控件类型和操作符规则与页面内表格相同

#### 筛选范围
- 弹窗内表格的筛选只针对当前弹窗内显示的数据
- 筛选不会影响主表格的数据
- 筛选结果仅在弹窗内生效

#### 性能考虑
- 弹窗内表格的数据量通常较小，可以在前端进行筛选
- 如果数据量较大，可以考虑后端筛选或分页加载
- 筛选应该快速响应，避免影响用户体验

---

## 十二、通用规则

### 1. 筛选器布局

#### 默认筛选（主要筛选栏）
- 默认筛选显示在表格上方的筛选栏中，以横向排列的方式展示
- 每个表格的默认筛选字段不超过12个，排列不超过3行
- 默认筛选字段是用户最常用的筛选条件，包括：
  - 核心业务字段（如保值方案、业务经理、客商等）
  - 关键状态字段（如状态、是否已定价、是否已交收等）
  - 常用查询字段（如合同编号、名称等）
  - 重要时间字段（如创建日期时间）
- 默认筛选字段应该根据业务重要性选择，确保用户能够快速进行常用筛选

#### 展开筛选（高级筛选）
- 展开筛选通过"高级筛选"按钮打开抽屉（Drawer）进行配置
- 展开筛选包括：
  - 不常用的筛选字段
  - 详细的数值范围筛选（如数量、价格等）
  - 其他时间字段（如发生日期时间、交割日期等）
  - 自定义字段
- 展开筛选可以包含所有支持筛选的字段，不受数量限制
- 用户可以根据需要选择使用展开筛选进行更精确的筛选

#### 筛选器交互
- 筛选器支持折叠/展开功能，用户可以根据需要显示或隐藏默认筛选器
- 默认筛选和展开筛选的条件可以同时生效，多个筛选条件之间是"且"（AND）关系

### 2. 筛选器控件类型说明

#### 文本输入框（Input）
- 用于文本类型的字段筛选
- 支持模糊匹配（包含操作符）
- 可以输入部分内容进行搜索
- 适用于：名称、编号、备注等文本字段

#### 下拉选择（Select）
- 用于固定选项或关联实体的筛选
- 支持单选或多选
- 支持搜索功能（可搜索选项）
- 适用于：状态、类型、关联实体等字段

#### 日期选择器（DatePicker）
- 用于日期类型的字段筛选
- 支持选择单个日期
- 适用于：需要精确日期匹配的场景

#### 日期范围选择器（RangePicker）
- 用于日期类型的范围筛选
- 支持选择起始日期和结束日期
- 适用于：创建日期、交割日期等需要范围筛选的字段

#### 日期时间范围选择器（RangePicker with Time）
- 用于日期时间类型的范围筛选
- 支持选择起始日期时间和结束日期时间（包含时分秒）
- 适用于：发生日期时间、创建日期时间等需要精确时间筛选的字段

#### 数字输入框（InputNumber）
- 用于数字类型的精确匹配筛选
- 支持输入单个数值
- 适用于：需要精确数值匹配的场景

#### 数字范围选择器（RangePicker for Number）
- 用于数字类型的范围筛选
- 支持输入最小值和最大值
- 适用于：数量、价格、金额等需要范围筛选的字段

### 3. 筛选操作符说明

#### 等于（=）
- 精确匹配，值必须完全相等
- 适用于：下拉选择、布尔类型等

#### 不等于（!=）
- 排除指定值
- 适用于：下拉选择、布尔类型等

#### 包含（LIKE）
- 模糊匹配，值包含指定内容即可
- 适用于：文本输入框

#### 大于（>）
- 数值大于指定值
- 适用于：数字类型

#### 大于等于（>=）
- 数值大于或等于指定值
- 适用于：数字类型、日期类型

#### 小于（<）
- 数值小于指定值
- 适用于：数字类型

#### 小于等于（<=）
- 数值小于或等于指定值
- 适用于：数字类型、日期类型

#### 范围（BETWEEN）
- 值在指定范围内（包含边界值）
- 适用于：数字范围选择器、日期范围选择器

### 4. 筛选器交互规则

#### 实时筛选
- 文本输入框支持实时筛选（输入即筛选）
- 下拉选择、日期选择器等支持选择后立即筛选
- 筛选结果实时更新表格数据

#### 筛选条件组合
- 多个筛选条件之间是"且"（AND）关系
- 同一字段的多个值之间是"或"（OR）关系（多选时）
- 支持清空所有筛选条件

#### 筛选条件保存
- 支持保存筛选条件为视图（View）
- 保存的视图可以在下次打开时快速应用
- 支持删除已保存的视图

#### 筛选器重置
- 提供"重置"按钮，可以清空所有筛选条件
- 重置后恢复默认的表格显示

### 5. 性能优化

#### 选项数据加载
- 下拉选择的选项数据支持懒加载
- 对于数据量大的选项列表（如客商列表），支持搜索和分页加载
- 选项数据可以缓存，减少重复请求

#### 筛选查询优化
- 后端筛选查询需要建立合适的索引
- 对于文本模糊匹配，考虑使用全文索引
- 对于范围查询，确保相关字段有索引

#### 前端筛选优化
- 对于数据量小的表格，可以在前端进行筛选
- 对于数据量大的表格，需要在后端进行筛选
- 支持防抖（Debounce）处理，避免频繁请求

### 6. 自定义字段筛选

#### 动态生成筛选器
- 根据自定义字段的类型和配置动态生成对应的筛选器
- 文本类型字段使用文本输入框，操作符：包含
- 数字类型字段使用数字范围选择器，操作符：范围
- 日期类型字段使用日期范围选择器，操作符：范围
- 日期时间类型字段使用日期时间范围选择器，操作符：范围
- 下拉选择类型字段使用下拉选择，操作符：等于，选项来源于字段配置
- 多选下拉类型字段使用下拉选择（多选），操作符：等于，选项来源于字段配置
- 布尔类型字段使用下拉选择，操作符：等于，选项：是/否

#### 自定义字段筛选位置
- 自定义字段的筛选器可以显示在高级筛选抽屉中
- 也可以根据用户配置显示在主要筛选栏中
- 支持用户自定义筛选器的显示位置和顺序

---

## 十三、与默认字段显示文档的一致性说明

### 筛选字段与显示字段的关系

本文档（9_1约定各表格的筛选内容.md）与9_4约定各表格的默认字段显示md文档需要保持一致：

#### 1. 筛选字段与显示字段的对应关系
- **直接对应**：大部分筛选字段在显示字段中都有对应的列，如合同编号、保值方案、业务经理等
- **计算字段筛选**：某些筛选字段是基于计算逻辑的，如"是否已定价"、"是否已交收"、"是否在定价期"等，这些字段在显示时可能以状态列或计算列的形式出现
- **可配置字段**：某些筛选字段（如运输方式、发生日期时间、创建人等）可能不在默认显示列中，但可以通过列配置功能添加到表格中显示

#### 2. 筛选字段的完整性
- 所有在默认显示列中的字段，如果适合筛选，都应该在筛选文档中定义
- 某些计算字段（如合同金额、未点数量）通常不需要筛选，因为它们是自动计算的
- 某些字段（如备注）可能不适合筛选，但可以通过高级筛选提供文本搜索功能

#### 3. 弹窗内表格筛选
- 弹窗内子表格的筛选字段应该与子表格的显示字段保持一致
- 弹窗内表格的筛选应该精简，只提供最常用的筛选字段
- 弹窗内表格的筛选不影响主表格的数据

#### 4. 文档同步更新原则
- 当在9_4文档中新增或修改显示字段时，需要同步检查9_1文档是否需要更新筛选字段
- 当在9_1文档中新增或修改筛选字段时，需要确保该字段在9_4文档中有对应的显示列（或可通过列配置添加）
- 两个文档应该保持逻辑一致性，避免出现筛选字段与显示字段不匹配的情况

---

## 十四、后续扩展

如果后续版本中新增表格或修改表格结构，需要同步更新本文档，明确：
1. 哪些列支持筛选以及筛选控件的类型
2. 弹窗内表格的筛选字段（如果有子表格）
3. 与默认字段显示文档的一致性

